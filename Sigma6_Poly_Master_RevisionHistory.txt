
                 'Sigma-6 Poly Master Controller' (SAMD21 MCU)

                         Firmware Revision History

================================================================================

v0.5  25-08-2025  (WIP)
```````````````````````
Migrated code from ItsyBitsy M0 Synth.  Removed unwanted functionality.

Adapted OLED display code to suit SSD1309 controller.

Adapted EEPROM driver code to suit 24LC64 (8k x 8).

Changed ADC input for Data Entry Pot: Use pin A11. (A12/AREF N/A in library.)


v0.75  02-09-2025
`````````````````
Removed 'Voice Params' UI screen.  Added #define to set NUMBER_OF_VOICES.

The number of Presets supported by the Master Controller is determined by the
number of Preset names (strings) defined in the array *PresetName[], located
in source file "poly_synth_panel.ino".

Hence, if the number of Presets implemented in the voice modules is extended,
then the names of the additional Presets should be added to the array.
Otherwise, the additional Presets in the voice module will be inaccessible.

Added "Display Brightness" UI screen to set OLED contrast (brightness).


v0.80  18-09-2025 *
`````````````````
Added complete Preset/Patch table... copied from Poly-voice firmware.

The number of Presets supported by the Master Controller is determined by the
number of Presets defined in the array PresetPatch[] in flash memory.

Added User Presets (8) saved in EEPROM via 'SET_USER_PRESET' screen.
When Affirmed, active patch is saved as the currently selected Favorite.
A User Preset is recalled by pressing one of the Favorite Preset buttons.

Default Favorites are Voice Presets 1..8 (loaded from PresetPatch[] table).

Added Command-Line User Interface (CLI) on USB-serial port.

Commands implemented in this FW version:
````````````````````````````````````````
'patch' - prints the active patch param values in C source code format;
'save'  - saves the active patch as a 'User Preset' in a Favorite (1..8),
            and (optionally) assigns a name to the saved Preset;
'help'  - prints a command usage summary.

* NB: "Factory reset" will occur with this firmware version...
  EEPROM data defaulted - Config param's and Fav. Presets.


v0.85  19-09-2025 *
`````````````````
Fixed major defect:  v0.80 omitted function RecallUserPreset() which sends
(potentially) modified patch parameters to the voice modules when a Favorite
Preset is selected.

When a User Preset (Favorite) is recalled, the master must send to the voices
(via MIDI) any patch parameters which have been modified to create the User 
Preset. In fact, the master sends all patch param's which can be modified via
the UI (control panel), regardless of which param's differ from the Factory 
Preset (base) values. 

Added icon on HOME screen to indicate 'Patch Modified'.


v0.86  21-09-2025
`````````````````
Fixed bug: 'Last selected Preset' was corrupted by recall of a Favorite.


v0.87  27-09-2025
`````````````````
Fixed bug: The SETUP menu item 'VOICE TUNING' was bypassed accidentally.


v0.88  04-10-2025
`````````````````
Fixed bug:  
  Reverb Mix (config param) was not transmitted to voice modules at start-up.

Modified start-up function to amend voice modules initialization:
  . Reverb Mix param is recalled from EEPROM and transmitted to voice modules;
  . If pitch bend is enabled, vibrato is disabled, and vice-versa.

Modified UI screen function for Pitch Bend setup:
  . If pitch bend is enabled, vibrato is disabled, and vice-versa.

Modified UI screen functions for LFO Freq and LFO Depth setting:
  . If Data Entry pot moved, new setting is sent to voice modules immediately
    and the active patch param is updated.
  . Removed 'Affirm' button function (redundant). Replaced with 'Done'.


v0.90  19-10-2025 *
`````````````````
> Added support for LED indicators on Favorite button/switches.

> Added support for Osc Mix slider pots and add OSC MIXER LEVELS screen.

> Added 'heartbeat' indicator = MCU on-board 'TX' LED (blue).

* NB: "Factory reset" will occur with this firmware version...
  EEPROM data defaulted - Config param's and Fav. Presets.
  Voice 'Fine Tuning' parameters will need to be restored manually.


--------------------------------------------------------------------------------

To Do:  
```````
> Support LFO control pots: LFO Freq, LFO Depth.

> Add "N-key rollover"...  
  If a Note-On message is received while all voice channels are busy,
  the oldest note will be terminated and the new note will be initiated
  after a 5ms delay.

```
> Add LFO synchronization option -- keep all voices LFOs in phase.

> Add HOLD (sustain) function... control by ext. switch/pedal or MIDI msg.
  (Will need revision of voice firmware.)

> Add "multi-timbral" mode -- for use with DAW/sequencer... 
  Assign arbitrary MIDI IN (Master) channel to any Voice module(s);
  Assign arbitrary Preset (factory-defined) to any Voice module(s).


________________________________________________________________________________

Sigma6_Poly_Master_RevisionHistory.txt                           www.mjbauer.biz  
